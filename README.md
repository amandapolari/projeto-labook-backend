<h1 align="center">Projeto Labook</h1>

<div align="center">

![endpoints_postman](./src/images/image-1.png)

Clique [**AQUI**](https://documenter.getpostman.com/view/28316385/2s9Ye8fuWG#intro) para conferir o resultado final da API!

<p align="center">
<br>
  <a href="https://skillicons.dev">
    <img src="https://skillicons.dev/icons?i=nodejs,typescript,express,mysql,sqlite,postman," style="height: 25px;"/>
  </a>
</p>
<p align="center"><strong>Status do Projeto:<br></strong>Conclu√≠do ‚úî</p>

</div>

## √çndice

-   [1. Resumo do Projeto](#resumo-do-projeto)
-   [2. Tecnologias e Conte√∫dos Utilizados](#tecnologias-e-conte√∫dos-utilizados)
-   [3. Banco de Dados](#banco-de-dados)
-   [4. Instala√ß√£o](#instala√ß√£o)
-   [5. Inicializa√ß√£o](#inicializa√ß√£o)
-   [6. Endpoints](#endpoints)
    -   [Get Users](#get-users)
    -   [Signup](#signup)
    -   [Login](#login)
    -   [Create Post](#create-post)
    -   [Get Posts](#get-posts)
    -   [Edit Post](#edit-post)
    -   [Delete Post](#delete-post)
    -   [Like/Dislike Post](#like-or-dislike-post)
-   [7. Tratamento de Erros](#tratamento-de-erros)
-   [8. Lista de Requisitos do Projeto](#lista-de-requisitos-do-projeto)
-   [9. Desenvolvedora](#desenvolvedora)

## Resumo do Projeto

[üîº](#projeto-labook)

O Labook √© uma API de rede social que permite a intera√ß√£o entre os usu√°rios. Ao se cadastrar e fazer login na plataforma, os usu√°rios podem criar, dar like ou dislike em postagens de outros usu√°rios.

A plataforma oferece uma variedade de recursos e funcionalidades que incluem:

-   **Cadastro de Usu√°rios**: Atrav√©s do processo de cadastro, os usu√°rios podem criar suas contas na plataforma, fornecendo informa√ß√µes pessoais b√°sicas como **nome**, **email** e **senha**.

-   **Cria√ß√£o de Postagens**: Os membros do Labook t√™m a capacidade de compartilhar suas ideias, pensamentos e experi√™ncias por meio de postagens.

-   **Likes e Dislikes**: Os usu√°rios podem "curtir" ou "descurtir" postagens de outros membros, permitindo uma variedade de intera√ß√µes e opini√µes sobre o conte√∫do compartilhado.

-   **Gerenciamento de Postagens**: Os criadores de postagens t√™m controle total sobre seu conte√∫do, podendo edit√°-lo ou exclu√≠-lo conforme necess√°rio.

-   **Recursos de Seguran√ßa**: Para garantir a seguran√ßa e privacidade dos usu√°rios, o Labook implementa medidas de seguran√ßa, como senhas criptografadas e autentica√ß√£o por meio de tokens JWT.

## Tecnologias e conte√∫dos utilizados

[üîº](#projeto-labook)

-   NodeJS
-   Typescript
-   Express
-   SQL e SQLite
-   Knex
-   POO
-   Arquitetura em camadas
-   Gera√ß√£o de UUID
-   Gera√ß√£o de hashes
-   Autentica√ß√£o e Autoriza√ß√£o
-   Roteamento
-   Postman

## Banco de dados

[üîº](#projeto-labook)

As entidades do banco de dados est√£o estruturadas da seguinte forma:

![Bando de dados no dbdiagrama.io](./src/images/image.png)

Clique [aqui](https://dbdiagram.io/d/63d16443296d97641d7c1ae1) para conferir o site com a estrutura do banco de dados.

## Instala√ß√£o

[üîº](#projeto-labook)

Ter instalado o `node.js`, o `npm` e rodar o seguinte comando:

```bash
npm install
```

## Inicializa√ß√£o

[üîº](#projeto-labook)

Para rodar o servidor localmente digite o seguinte comando:

```bash
npm run dev
```

## Endpoints

[üîº](#projeto-labook)

Clique [**AQUI**](https://documenter.getpostman.com/view/28316385/2s9Ye8fuWG) para visualizar a documenta√ß√£o da [API LABOOK](https://documenter.getpostman.com/view/28316385/2s9Ye8fuWG).

A base URL para esta API √© **`http://localhost:3003`**

Os endpoints est√£o divididos em pastas de acordo com o que √© gerenciado.
A API fornece os seguintes endpoints:

### Get users

[üîº](#projeto-labook)

-   Endpoint privado (Somente **administradores** podem acessar esse recurso)
-   M√©todo HTTP: GET
-   Descri√ß√£o: Retorna todos os usu√°rios cadastrados no sistema.
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`

**INPUT:**

```json
// headers.authorization = "token_de_autentica√ß√£o"
```

**OUTPUT:**

```json
[
    {
        "id": "7ed8d1f6-4b22-4a0e-a38b-45f275c32d21",
        "name": "Morgana",
        "email": "morgana@gmail.com",
        "password": "$2a$12$IOmC1TDDM6YNMTTkRWqRxOeZ06jz/OnMsjLEHZdX5OrFD3sJIVBXy",
        "role": "NORMAL",
        "createdAt": "04-12-2023 11:31:26"
    },
    {
        "id": "16f86eba-fde0-42f5-a251-b0afe72b5c93",
        "name": "Amanda",
        "email": "amanda@gmail.com",
        "password": "$2a$12$7VRnTvXK8X5wsj84O207POIWCWhs/Ps8pw5wJH49OyuwqedAijnKe",
        "role": "ADMIN",
        "createdAt": "19-11-2023 12:27:51"
    },
    {
        "id": "527348d8-434d-4243-b5c9-927d8e96b418",
        "name": "Atlas",
        "email": "atlas@gmail.com",
        "password": "$2a$12$KOKtDri0bntdxt5488R1nOZabISu9jF4vBCOWIMlt6vcrUnp3hhm.",
        "role": "NORMAL",
        "createdAt": "19-11-2023 13:10:34"
    },
    {
        "id": "8b4d95ab-0b13-4092-8661-0b29bfa46830",
        "name": "Luan",
        "email": "luan@gmail.com",
        "password": "$2a$12$DMX1r916xqOPGrFgeVj0JeZXQYSOCmT5lzAmXc5tb2i3ddAO7geLi",
        "role": "ADMIN",
        "createdAt": "17-11-2023 14:26:54"
    }
]
```

### Signup

[üîº](#projeto-labook)

-   Endpoint p√∫blico
-   M√©todo HTTP: POST
-   Descri√ß√£o: Cria um novo usu√°rio.
-   Enviar via body: `name`, `email` e `password`

**INPUT:**

```json
{
    "name": "Morgana",
    "email": "morgana@email.com",
    "password": "Morgana@123"
}
```

**OUTPUT:**

```json
{
    "message": "Usu√°rio criado com sucesso",
    "token": "token_de_autentica√ß√£o"
}
```

### Login

[üîº](#projeto-labook)

-   Endpoint p√∫blico
-   M√©todo HTTP: POST
-   Descri√ß√£o: Realiza o login do usu√°rio.
-   Enviar via body: `email` e `password`

**INPUT:**

```json
{
    "email": "morgana@email.com",
    "password": "Morgana@123"
}
```

**OUTPUT:**

```json
{
    "message": "Login realizado com sucesso",
    "token": "token_de_autentica√ß√£o"
}
```

### Create post

[üîº](#projeto-labook)

-   Endpoint privado
-   M√©todo HTTP: POST
-   Descri√ß√£o: Cria um novo post.
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`
-   Enviar via body: `content`

**INPUT:**

```json
// headers.authorization = "token_de_autentica√ß√£o"

// body:
{
    "content": "Mais um post para a comunidade!"
}
```

**OUTPUT:**

```json
{
    "message": "Post criado com sucesso",
    "content": "Mais um post para a comunidade!"
}
```

### Get posts

[üîº](#projeto-labook)

-   Endpoint privado
-   M√©todo HTTP: GET
-   Descri√ß√£o: Retorna um array de objetos, onde cada objeto cont√©m as informa√ß√µes de um post.
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`

**INPUT:**

```json
// headers.authorization = "token_de_autentica√ß√£o"
```

**OUTPUT:**

```json
[
    {
        "id": "0e3f6d82-ec45-4c81-8ecb-ac7aac044b50",
        "content": "O sem-coroa h√° de reinar!",
        "likes": 1,
        "dislikes": 0,
        "createdAt": "19-11-2023 12:47:07",
        "updatedAt": "19-11-2023 12:47:07",
        "creator": {
            "id": "8b4d95ab-0b13-4092-8661-0b29bfa46830",
            "name": "Luan"
        }
    },
    {
        "id": "5153f8a9-a449-424c-89a4-981dd5c1ce9f",
        "content": "Pode parar de nadar agora, Lily. Finalmente chegamos √† costa",
        "likes": 0,
        "dislikes": 1,
        "createdAt": "19-11-2023 13:29:20",
        "updatedAt": "19-11-2023 13:34:13",
        "creator": {
            "id": "527348d8-434d-4243-b5c9-927d8e96b418",
            "name": "Atlas"
        }
    }
]
```

### Edit post

[üîº](#projeto-labook)

-   Endpoint privado
-   M√©todo HTTP: PUT
-   Descri√ß√£o: Edita o conte√∫do de um post existente.
-   Enviar via params: `id` do post
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`
-   Enviar via body: `content`

**INPUT:**

```json
// params :id

// headers.authorization = "token_de_autentica√ß√£o"

// body:
{
    "content": "Texto editado do post"
}
```

**OUTPUT:**

```json
{
    "message": "Post atualizado com sucesso",
    "content": "Texto editado do post"
}
```

### Delete post

[üîº](#projeto-labook)

-   Endpoint privado
-   M√©todo HTTP: DELETE
-   Descri√ß√£o: Deleta um post criado por voc√™.
-   Enviar via params: id
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`

```json
// params :id

// headers.authorization = "token_de_autentica√ß√£o"
```

**OUTPUT:**

```json
{
    "message": "Post deletado com sucesso"
}
```

### Like or dislike post

[üîº](#projeto-labook)

-   Endpoint privado
-   M√©todo HTTP: PUT
-   Descri√ß√£o: D√° like ou dislike em um post que n√£o foi criado por voc√™.
-   Enviar via params: id
-   Enviar via headers.authorization: `token_de_autentica√ß√£o`
-   Enviar via body: like (true para like, false para dislike)

**INPUT:**

**like**

```json
{
    "like": true
}
```

**dislike**

```json
{
    "like": false
}
```

## Lista de requisitos do projeto

[üîº](#projeto-labook)

-   Documenta√ß√£o

    -   [ ] Documenta√ß√£o Postman de todos os endpoints (obrigat√≥ria para corre√ß√£o)

-   Endpoints

    -   [ ] signup
    -   [ ] login
    -   [ ] create post
    -   [ ] get posts
    -   [ ] edit post
    -   [ ] delete post
    -   [ ] like / dislike post

-   Autentica√ß√£o e Autoriza√ß√£o

    -   [ ] identifica√ß√£o UUID
    -   [ ] senhas hasheadas com Bcrypt
    -   [ ] tokens JWT

-   C√≥digo

    -   [ ] POO
    -   [ ] Arquitetura em camadas
    -   [ ] Roteadores no Express

-   README.md

    -   [ ] Criar Readme

## Tratamento de Erros

[üîº](#projeto-labook)

O Labook implementa tratamento de erros para fornecer respostas adequadas em diferentes cen√°rios. Abaixo est√£o alguns dos erros tratados no projeto:

### BadRequestError

-   **C√≥digo:** 400
-   **Descri√ß√£o:** Indica que a requisi√ß√£o feita pelo cliente √© inv√°lida.

### NotFoundError

-   **C√≥digo:** 404
-   **Descri√ß√£o:** Indica que o recurso solicitado n√£o foi encontrado.

### Customiza√ß√£o de Erros com Zod

Al√©m disso, o Zod tamb√©m pode ser utilizado para validar e customizar erros relacionados ao BadRequestError. Por exemplo, para o endpoint de signup:

```ts
// Uso do Zod para valida√ß√£o detalhada
export const SignupSchema = z
    .object({
        name: z
            .string({
                required_error: "'name' √© obrigat√≥rio",
                invalid_type_error: "'name' deve ser do tipo string",
            })
            .min(2, "'name' deve possuir no m√≠nimo 2 caracteres"),
        // ... outras valida√ß√µes ...
    })
    .transform((data) => data as SignupInputDTO);
```

O uso do Zod permite validar os dados recebidos de forma detalhada, gerando mensagens de erro espec√≠ficas que contribuem para uma resposta mais informativa ao cliente.

## Desenvolvedora

[üîº](#projeto-labook)

Este projeto foi desenvolvido por:

**Amanda Polari** : [LinkedIn](https://www.linkedin.com/in/amandapolari/) | [GitHub](https://github.com/amandapolari)
